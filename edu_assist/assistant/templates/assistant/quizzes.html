{% extends "assistant/base.html" %}
{% block title %}Quizzes â€¢ AI Edu Assist{% endblock %}
{% block content %}
<div class="card p-3 p-md-4">
  <form method="get" action="/quizzes/" class="row g-2 align-items-end">
    <div class="col-md-6">
      <label class="form-label">Topic</label>
      <input name="topic" class="form-control" value="{{ selected_topic }}" placeholder="e.g., Python">
    </div>
    <div class="col-md-4">
      <label class="form-label">Difficulty</label>
      <select name="difficulty" class="form-select">
        <option value="" {% if not selected_difficulty %}selected{% endif %}>Any</option>
        <option value="Easy" {% if difficulty_easy_selected %}selected{% endif %}>Easy</option>
        <option value="Medium" {% if difficulty_medium_selected %}selected{% endif %}>Medium</option>
        <option value="Hard" {% if difficulty_hard_selected %}selected{% endif %}>Hard</option>
      </select>
    </div>
    <div class="col-md-2 d-grid">
      <button class="btn btn-primary" type="submit">Filter</button>
    </div>
  </form>

  {% if message %}
  <div class="alert alert-info mt-3">{{ message }}</div>
  {% endif %}

  {% if quizzes %}
  <form method="post" action="/quizzes/" class="mt-3">
    {% csrf_token %}
    <ol class="list-group list-group-numbered">
      {% for q in quizzes %}
      <li class="list-group-item">
        <p class="fw-semibold mb-2">{{ q.question }}</p>

        {% for opt in q.options %}
        <div class="form-check">
          <input class="form-check-input" type="radio" name="answer_{{ q.id }}" value="{{ forloop.counter }}" required>
          <label class="form-check-label">{{ opt }}</label>
        </div>
        {% endfor %}
      </li>
      {% endfor %}
    </ol>
    <div class="mt-3 d-grid d-md-flex justify-content-md-end">
      <button class="btn btn-success btn-lg" type="submit">Submit</button>
    </div>
  </form>
  {% endif %}
</div>
{% endblock %}