{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}AI Edu Assist{% endblock %}</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root { --sidebar-w: 260px; }
    body { background:#f7f7fb; }
    .container-narrow { max-width: 900px; }

    /* Desktop layout: left sidebar + main content */
    @media (min-width: 768px) {
      .layout {
        display: grid;
        grid-template-columns: var(--sidebar-w) 1fr;
        min-height: 100vh;
      }
      .sidebar {
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
        background: #ffffff;
        border-right: 1px solid #eaecef;
      }
    }

    .brand { font-weight: 700; letter-spacing:.3px; }
    .nav-pills .nav-link { border-radius: 10px; }
    .nav-pills .nav-link.active { font-weight: 600; }

    /* Chat bubbles (used by chat page) */
    .bubble{ padding:12px 14px; border-radius:12px; margin:8px 0 }
    .me{ background:#e8f0fe }
    .ai{ background:#f1f3f4 }
    .card { border:0; box-shadow:0 4px 18px rgba(0,0,0,.06); border-radius:16px; }
  </style>

  {% block head %}{% endblock %}
</head>
<body>

<!-- Mobile top bar with offcanvas menu -->
<nav class="navbar bg-white border-bottom d-md-none">
  <div class="container-fluid">
    <a class="navbar-brand brand" href="/">AI Edu Assist</a>
    <button class="btn btn-outline-secondary" type="button"
            data-bs-toggle="offcanvas" data-bs-target="#mobileNav" aria-controls="mobileNav">
      Menu
    </button>
  </div>
</nav>

<div class="layout">
  <!-- LEFT SIDEBAR (visible â‰¥ md) -->
  <aside class="sidebar d-none d-md-block">
    <div class="p-3">
      <div class="brand fs-4 mb-3">AI Edu Assist</div>
      <nav class="nav flex-column nav-pills gap-1">
        <a class="nav-link {% if active == 'chat' %}active{% endif %}" href="/">Chatbot</a>
        <a class="nav-link {% if active == 'quizzes' %}active{% endif %}" href="/quizzes/">Quizzes</a>
        <a class="nav-link {% if active == 'alarm' %}active{% endif %}" href="/alarm/">Alarm</a>
      </nav>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="p-3 p-md-4">
    <div class="container container-narrow">
      {% block content %}{% endblock %}
    </div>
  </main>
</div>

<!-- Mobile offcanvas menu -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="mobileNav">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">AI Edu Assist</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <nav class="nav flex-column nav-pills gap-1">
      <a class="nav-link {% if active == 'chat' %}active{% endif %}" href="/">Chatbot</a>
      <a class="nav-link {% if active == 'quizzes' %}active{% endif %}" href="/quizzes/">Quizzes</a>
      <a class="nav-link {% if active == 'alarm' %}active{% endif %}" href="/alarm/">Alarm</a>
    </nav>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block scripts %}{% endblock %}
</body>
</html>
